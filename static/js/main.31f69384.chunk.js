(this.webpackJsonplife=this.webpackJsonplife||[]).push([[0],{11:function(t,e,n){t.exports=n(18)},16:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(8),i=n.n(r),l=(n(16),n(2)),c=n(3),s=n(4),u=n(1),h=n(10),v=n(5),f=n(9),p=n.n(f),d=function(t){function e(t){if(Object(l.a)(this,e),!t.router||!t.eventName||!t.label)throw new Error('Button requires "router", "eventName", and "label"');return Object(s.a)(this,Object(u.a)(e).call(this,t))}return Object(v.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return o.a.createElement("button",{onClick:this.onClick.bind(this)},this.props.label)}},{key:"onClick",value:function(t){this.props.router.emit(this.props.eventName,this.props.label)}}]),e}(o.a.Component),m=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t)))._on={on:!0,label:"Stop"},n._off={on:!1,label:"Start"},n.state=n._off,n}return Object(v.a)(e,t),Object(c.a)(e,[{key:"componentWillUnount",value:function(){this.props.router.removeListener("reset",this.reset)}},{key:"componentDidMount",value:function(){this.props.router.on("reset",this.reset.bind(this))}},{key:"reset",value:function(){this.setState(this._off)}},{key:"render",value:function(){return o.a.createElement("button",{onClick:this.toggle.bind(this)},this.state.label)}},{key:"componentDidUpdate",value:function(){this.props.router&&this.props.router.emit(this.props.eventName,this.state.on)}},{key:"toggle",value:function(){var t=this.state.on?this._off:this._on;this.setState(t)}}]),e}(o.a.Component),b=function(){function t(e,n){Object(l.a)(this,t),this.rows=e,this.cols=n,this.length=e*n,this.cells=[],this.initialize(),this.flattened=this.cells.flat()}return Object(c.a)(t,[{key:"count",value:function(t){var e=0,n=!0,a=!1,o=void 0;try{for(var r,i=t.neighbors[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var l=r.value;1===(l=this.cells[l.row][l.col]).value&&(e+=1)}}catch(c){a=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return e}},{key:"initialize",value:function(){for(var t=0,e=0;e<this.rows;++e)for(var n=this.cells[e]=[],a=0;a<this.cols;++a){var o={idx:t++,row:e,col:a,value:0};this.assignNeighbors(o),n.push(o)}}},{key:"assignNeighbors",value:function(t){var e=this,n=t.row,a=t.col,o=t.idx,r=[{idx:o,row:n,col:a-1},{idx:o,row:n,col:a+1},{idx:o,row:n-1,col:a},{idx:o,row:n-1,col:a-1},{idx:o,row:n-1,col:a+1},{idx:o,row:n+1,col:a},{idx:o,row:n+1,col:a-1},{idx:o,row:n+1,col:a+1}];t.neighbors=r.filter((function(t){return t.row>=0&&t.row<e.rows&&t.col>=0&&t.col<e.cols}))}},{key:"changes",value:function(){var t=[],e=!0,n=!1,a=void 0;try{for(var o,r=this.flattened[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value,l=this.count(i);3!==l||0!==i.value?1===i.value&&(l>3||l<2)&&(console.log("killing",i.row,i.col),t.push({row:i.row,col:i.col,value:0})):(console.log("reviving",i.row,i.col),t.push({row:i.row,col:i.col,value:1}))}}catch(c){n=!0,a=c}finally{try{e||null==r.return||r.return()}finally{if(n)throw a}}return t}},{key:"apply",value:function(t){var e=[],n=!0,a=!1,o=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var l=r.value,c=this.cells[l.row][l.col];c.value=l.value,e.push(c)}}catch(s){a=!0,o=s}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return e}},{key:"advance",value:function(){return this.apply(this.changes())}}]),t}(),y=n(6),g=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).active=t.active?t.active:"\u2b24",n.inactive=t.inactive?t.inactive:" ",n.value=t.data.value,n.onClick=n.clickHandler.bind(Object(y.a)(n)),n}return Object(v.a)(e,t),Object(c.a)(e,[{key:"shouldComponentUpdate",value:function(t,e){return this.value!==t.data.value}},{key:"componentDidUpdate",value:function(){console.log("Cell didUpdate",this.props.data),this.value=this.props.data.value}},{key:"clickHandler",value:function(){this.props.router.emit("cell.clicked",this.props.data)}},{key:"render",value:function(){var t=this.props.data.value?"App-cell active":"App-cell inactive";return o.a.createElement("td",{className:t,onClick:this.onClick},this.props.active?"\u2b24":" ")}}]),e}(o.a.Component),w=(n(17),new(function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(l.a)(this,e),t=Object(s.a)(this,Object(u.a)(e).call(this)),n.length?(t.patterns=n.join(")|("),t.patterns=new RegExp("(".concat(t.patterns,")")),t):Object(s.a)(t)}return Object(v.a)(e,t),Object(c.a)(e,[{key:"emit",value:function(t,n){Object(h.a)(Object(u.a)(e.prototype),"emit",this).call(this,t,n),this.patterns&&t.match(this.patterns)&&console.log("router",t,n)}}]),e}(p.a))(["cell.*","onoff"])),k=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).rows=t.rows,n.cols=t.cols,n.game=new b(n.rows,n.cols),n.state={game:n.game,rows:n.rows,cols:n.cols},n}return Object(v.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){w.on("onoff",this.toggleInterval.bind(this)),w.on("reset",this.reset.bind(this)),w.on("cell.clicked",this.cellClicked.bind(this))}},{key:"reset",value:function(){this.interval&&(clearInterval(this.interval),this.interval=null);var t=!0,e=!1,n=void 0;try{for(var a,o=this.state.game.flattened[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.value=0}}catch(r){e=!0,n=r}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}this.setState({game:this.game})}},{key:"cellClicked",value:function(t){t.value=0===t.value?1:0,this.setState({game:this.game})}},{key:"toggleInterval",value:function(t){var e=this;console.log("toggelInterval",t),this.interval&&(clearInterval(this.interval),this.interval=null),t&&(this.interval=setInterval((function(){return e.advance()}),1e3))}},{key:"advance",value:function(){this.game.advance().length&&this.setState({game:this.game})}},{key:"render",value:function(){var t=this.state.game.cells.map((function(t,e){var n=t.map((function(t,n){var a="r".concat(e,"c").concat(n);return o.a.createElement(g,{key:a,router:w,data:t})})),a="r".concat(e);return o.a.createElement("tr",{key:a},n)}));return o.a.createElement("table",null,o.a.createElement("tbody",null,t))}}]),e}(o.a.Component);var j=function(t){return o.a.createElement("div",{className:"App-container"},o.a.createElement(m,{router:w,eventName:"onoff"}),o.a.createElement(d,{router:w,eventName:"reset",label:"Reset"}),o.a.createElement(k,{rows:30,cols:30}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.31f69384.chunk.js.map